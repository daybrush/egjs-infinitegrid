/*!
 * Copyright (c) 2017 NAVER Corp.
 * @egjs/infinitegrid project is licensed under the MIT license
 * 
 * @egjs/infinitegrid JavaScript library
 * https://github.com/naver/egjs-infinitegrid
 * 
 * @version 3.4.0-snapshot
 * 
 * All-in-one packaged file for ease use of '@egjs/infinitegrid' with below dependencies.
 * NOTE: This is not an official distribution file and is only for user convenience.
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.InfiniteGrid=e():(t.eg=t.eg||{},t.eg.InfiniteGrid=e())}("undefined"!=typeof self?self:this,function(){return function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,i){"use strict";(function(t){i.d(e,"b",function(){return s}),"undefined"==typeof window&&(t.window={document:{},navigator:{userAgent:""}});const s=window,n=s.document;e.a=n}).call(e,i(5))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=i(3);for(const t in e)e["default"][t]=e[t];t.exports=e["default"]}.call(e,i(2)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,i){"use strict";function s(t){const e=[];if(t)for(let i=0,s=t.length;i<s;i++)e.push(t[i]);return e}function n(t){return t.match(/^<([A-z]+)\s*([^>]*)>/)}function r(t,e=!1){let i;if("string"==typeof t){if(n(t)){const e=M.a.createElement("div");e.innerHTML=t,i=e.childNodes}else i=M.a.querySelectorAll(t);i=e?s(i):i&&i.length>0&&i[0]||undefined}else t===M.b?i=t:!t.nodeName||1!==t.nodeType&&9!==t.nodeType?"jQuery"in M.b&&t instanceof M.b.jQuery||t.constructor.prototype.jquery?i=r(e?t.toArray():t.get(0),e):Array.isArray(t)&&(i=t.map(t=>r(t)),e||(i=i.length>=1?i[0]:undefined)):i=t;return i}function o(t,e,i,s){if(A){let n=s||!1;"object"==typeof s&&(n=!!j&&s),t.addEventListener(e,i,n)}else t.attachEvent?t.attachEvent(`on${e}`,i):t[`on${e}`]=i}function h(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent(`on${e}`,i):t[`on${e}`]=null}function a(t){return(T?M.b.getComputedStyle(t):t.currentStyle)||{}}function c(t,e,i){if(t===M.b)return M.b[`inner${e}`]||M.a.body[`client${e}`];if(9===t.nodeType){const i=t.documentElement;return Math.max(t.body[`scroll${e}`],i[`scroll${e}`],t.body[`offset${e}`],i[`offset${e}`],i[`client${e}`])}{let s=0;if(i){const i=t.getBoundingClientRect();s="Width"===e?i.right-i.left:i.bottom-i.top}else s=t[`client${e}`]||t[`offset${e}`];return parseFloat(s||a(t)[e.toLowerCase()])||0}}function l(t){return c(t,"Width",!1)}function u(t){return c(t,"Height",!1)}function d(t){return c(t,"Width",!0)}function p(t){return c(t,"Height",!0)}function g(t){return{width:d(t),height:p(t)}}function f(t){return lt[t?D:q]}function _(t,e){return Object.assign({},Q,t,e)}function m(t){return t.map(t=>Object.assign({},t))}function y(t,e){for(let i=t.length-1;i>=0;--i)t[i]=e;return t}function z(t){return void 0===t}function S(t,e,i){t.forEach(t=>{t in e&&(i[t]=`${e[t]}px`)})}function v(t,e,i,s){t[`${at}-property`]=e?`${ht},width,height`:"",t[`${at}-duration`]=e?`${e}s`:"",t[`${at}-delay`]=e?"0s":"",t[ht]=e?`translate(${i.left-s.left}px,${i.top-s.top}px)`:""}function w(t){_t.resizeAll()}function b(t,e){return!!t.getAttribute(`${e}width`)}function C(t,e){return~t.indexOf(e)}function x(t,e,i,s,n,r){const o={left:s,top:i,type:e,width:1,height:1};for(let r=s;r<n&&t[i][r]===e;++r)o.width=r-s+1;for(let n=i;n<r&&t[n][s]===e;++n)o.height=n-i+1;return function(t,e,i,s,n,r){for(let o=s;o<s+r;++o)for(let s=i;s<i+n;++s)e===t[o][s]&&(t[o][s]=0)}(t,e,s,i,o.width,o.height),o}function E(t){if(t.column)return t.column;let e=0;if(t.el){const i=t.el.dataset;e=i?i.column||1:t.el.getAttribute("column")||1}else e=1;return t.column=e,e}function O(t,e){let i=t/e;return i<1&&(i=1/i),i-1}Object.defineProperty(e,"__esModule",{value:!0});var I=i(4),L=i.n(I),M=i(0);const P=M.b.navigator.userAgent,T=!!("getComputedStyle"in M.b),A=!!("addEventListener"in M.a),j=(()=>{let t=!1;try{A&&Object.defineProperty&&M.a.addEventListener("test",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch(e){}return t})(),R=/MSIE|Trident|Windows Phone|Edge/.test(P),k=/iPhone|iPad/.test(P),$=/Android 2\./.test(P),F="_eg-infinitegrid-container_",V="_eg-infinitegrid-ignore_",H="_INFINITEGRID_TRANSITION",N=!0,B=!1,q="vertical",D="horizontal",W=!0,K=!1,X=!0,U=!1,G=!0,Y=-1e5,J="data-groupkey",Q={horizontal:!1,margin:0},Z=P.toLowerCase(),tt=(/mobi|ios|android/.test(Z),0),et=1,it=2,st=4,nt=/applewebkit\/([\d|.]*)/g.exec(Z),rt=nt&&parseInt(nt[1],10)||0,ot=rt&&rt<537,[ht,at,ct]=function(){const t={transitionend:"",webkitTransitionEnd:"-webkit-",oTransitionEnd:"-o-",mozTransitionEnd:"-moz-"};for(const e in t){const i=t[e];if(`on${e.toLowerCase()}`in M.b)return[`${i}transform`,`${i}transition`,e]}return[]}(),lt={vertical:{pos1:"top",endPos1:"bottom",size1:"height",pos2:"left",endPos2:"right",size2:"width"},horizontal:{pos1:"left",endPos1:"right",size1:"width",pos2:"top",endPos2:"bottom",size2:"height"}};class ut{static from(t,e,{groupKey:i,isAppend:n}){return s(ut.selectItems(r(t,G),e)).map(t=>({el:t,groupKey:i,content:t.outerHTML,rect:{top:Y,left:Y}}))}static selectItems(t,e){return t.filter(t=>{const i=t.className.split(" ");return!i.some(t=>t===V)&&(e&&"*"!==e?i.some(t=>t===e):t)})}static pluck(t,e){return t.reduce((t,i)=>t.concat(i[e]),[])}constructor(){this.clear()}getStatus(t,e){const i=this._data,s=Math.max(this.indexOf(t),0),n=this.indexOf(e)+1||i.length;return{_data:i.slice(s,n).map(t=>{const e=t.items.map(t=>{const e=Object.assign({},t);return delete e.el,e}),i=Object.assign({},t);return i.items=e,i})}}setStatus(t){const e=t._data;this.set(e)}size(){return this._data.length}fit(t,e){if(!this._data.length)return;const i=e?"left":"top";0!==t&&(this._data=this._data.map(e=>(e.items=e.items.map(e=>(e.rect[i]-=t,e)),e.outlines.start=e.outlines.start.map(e=>e-t),e.outlines.end=e.outlines.end.map(e=>e-t),e)))}pluck(t,e,i){const s=z(e)?this._data:this._data.slice(e,(z(i)?e:i)+1);return ut.pluck(s,t)}getOutline(t,e){const i=this._data[t];return i?i.outlines[e]:[]}getEdgeIndex(t,e,i){const s="start"===t?"min":"max";let n=-1,r="start"===t?Infinity:-Infinity;for(let o=e;o<=i;o++){const e=Math[s](...this.getOutline(o,t));("start"===t&&r>e||"end"===t&&r<e)&&(r=e,n=o)}return n}getEdgeValue(t,e,i){const s=this.pluck("outlines",this.getEdgeIndex(t,e,i)).reduce((e,i)=>e.concat(i[t]),[]);return s.length?Math["start"===t?"min":"max"](...s):0}clearOutlines(t=-1,e=-1){this.get().forEach((i,s)=>{t<=s&&s<=e||(i.items.forEach(t=>{t.rect.top=Y,t.rect.left=Y}),i.outlines.start=[],i.outlines.end=[])})}getMaxEdgeValue(){const t=this.get();for(let e=t.length-1;e>=0;--e){const i=t[e].outlines.end;if(i.length){return Math.max(...i)}}return 0}append(t){return this._data.push(t),t.items}prepend(t){return this._data.unshift(t),t.items}clear(){this._data=[]}remove(t,e,i){let s=[];const n=t.getAttribute(J);let r=this.get(e,i).filter(t=>String(t.groupKey)===n);if(!r.length)return s;const o=(r=r[0]).items.length;let h=-1;for(let e=0;e<o;e++)if(r.items[e].el===t){h=e;break}return~h&&(r.items.splice(h,1),this.set(r,n),s=r.items),s}indexOf(t){const e="object"==typeof t?t.groupKey:t,i=this._data,s=i.length;for(let t=0;t<s;++t)if(e===i[t].groupKey)return t;return-1}get(t,e){return z(t)?this._data:this._data.slice(t,(z(e)?t:e)+1)}set(t,e){if(z(e)||Array.isArray(t))this._data=t.concat();else{const i=this._data.length;let s=-1;for(let t=0;t<i;t++)if(this._data[t].groupKey===e){s=t;break}~s&&(this._data[s]=t)}}getData(t){return this._data[t]}}class dt{static renderItem(t,e,i){if(!t.el)return;const{el:s,prevRect:n}=t,r=s.style;if(s.setAttribute(J,t.groupKey),r.position="absolute",S(["width","height"],e,r),i&&at&&n){if(v(r,i,e,n),s[H])return;s[H]=!0,function(t,e,i,s){const n=s=>{h(t,e,n),i(s)};o(t,e,n,s)}(s,ct,()=>{const e=t.rect;v(r),S(["left","top"],e,r),t.prevRect=e,s[H]=!1})}else S(["left","top"],e,r),t.prevRect=e}static renderItems(t,e){t.forEach(t=>{dt.renderItem(t,t.rect,e)})}static removeItems(t){t.forEach(t=>{t.el&&(dt.removeElement(t.el),t.el=null)})}static removeElement(t){const e=t&&t.parentNode;e&&e.removeChild(t)}static createElements(t){if(!t.length)return;const e=t.filter(t=>!t.el);if(!e.length)return;const i=r(e.map(({content:t})=>t.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")).join(""),G);e.forEach((t,e)=>{t.el=i[e]})}constructor(t,e){Object.assign(this.options={isEqualSize:!1,isConstantSize:!1,horizontal:!1,container:!1},e),this._size={container:-1,view:-1,viewport:-1,item:null},this._init(t),this.resize()}getStatus(){return{cssText:this.container.style.cssText,_size:Object.assign({},this._size)}}setStatus(t){this.container.style.cssText=t.cssText,Object.assign(this._size,t._size)}updateSize(t){const{isEqualSize:e,isConstantSize:i}=this.options,s=this._size;return t.map(t=>t.el?(e&&!s.item&&(s.item=g(t.el)),t.size=e&&Object.assign(s.item)||i&&t.orgSize&&Object.assign(t.orgSize)||g(t.el),t.orgSize||(t.orgSize=Object.assign({},t.size)),t):t)}_init(t){const e=r(t),i=a(e),{container:s,horizontal:n}=this.options;if(this._orgStyle={},"static"===i.position&&(this._orgStyle.position=e.style.position,e.style.position="relative"),s){const t=n?["X","Y"]:["Y","X"];this._orgStyle.overflowX=e.style.overflowX,this._orgStyle.overflowY=e.style.overflowY,e.style[`overflow${t[0]}`]="scroll",e.style[`overflow${t[1]}`]="hidden",this.view=e,this.container=!0===s?function(t){const e=M.a.createElement("div");e.className=F,e.style.position="relative",e.style.height="100%";const i=t.children,s=i.length;for(let t=0;t<s;t++)e.appendChild(i[0]);return t.appendChild(e),e}(this.view):s}else this.view=M.b,this.container=e}append(t){this._insert(t,N,{top:Y,left:Y})}prepend(t){this._insert(t,B,{top:Y,left:Y})}createAndInsert(t,e){dt.createElements(t),dt.renderItems(t),this._insert(t,e)}_insert(t,e,i){const s=this.container,n=M.a.createDocumentFragment();t.forEach(t=>{i&&dt.renderItem(t,i),e?n.appendChild(t.el):n.insertBefore(t.el,n.firstChild)}),e?s.appendChild(n):s.insertBefore(n,s.firstChild)}_calcSize(){return this.options.horizontal?u(this.container):l(this.container)}getViewSize(){return this._size.view}getViewportSize(){return this._size.viewport}setContainerSize(t){this.container.style[this.options.horizontal?"width":"height"]=`${t}px`}resize(){const t=this.options.horizontal,e=this.view,i=this.isNeededResize();return i&&(this._size={viewport:this._calcSize(),item:null}),this._size.view=t?l(e):u(e),i}isNeededResize(){return this._calcSize()!==this._size.viewport}clear(){this.container.innerHTML="",this.container.style[this.options.horizontal?"width":"height"]="",this._size={item:null,viewport:-1,container:-1,view:-1}}destroy(){this.clear();const t=this.options.container;for(const e in this._orgStyle)this[t?"view":"container"].style[e]=this._orgStyle[e];t&&this.container.parentNode.removeChild(this.container)}}class pt{constructor(t,e){Object.assign(this.options={container:t,resize:()=>{},check:()=>{},isOverflowScroll:!1,horizontal:!1},e),this._timer={resize:null},this.reset(),this._containerOffset=0,this._view=t,this._scrollIssue=k,this._onCheck=this._onCheck.bind(this),this._onResize=this._onResize.bind(this),this.attachEvent(),this.setScrollPos(),this.resize()}getStatus(){return{_prevPos:this._prevPos,scrollPos:this.getOrgScrollPos()}}setStatus(t,e=!0){this._prevPos=t._prevPos,e&&this.scrollTo(t.scrollPos)}scrollBy(t){const e=this.options.horizontal?[t,0]:[0,t];!function(t,e,i){t===M.b?t.scrollBy(e,i):(t.scrollLeft+=e,t.scrollTop+=i)}(this._view,...e),this.setScrollPos()}scrollTo(t){const e=this.options.horizontal?[t,0]:[0,t];!function(t,e,i){t===M.b?t.scroll(e,i):(t.scrollLeft=e,t.scrollTop=i)}(this._view,...e)}getScrollPos(){return this._prevPos}setScrollPos(t){let e=t;void 0===t&&(e=this.getOrgScrollPos()),this._prevPos=e-this.getContainerOffset()}attachEvent(){o(this._view,"scroll",this._onCheck),o(window,"resize",this._onResize)}getOrgScrollPos(){return function(t,e=!1){const i=`scroll${e?"Left":"Top"}`;return t===M.b?M.b[e?"pageXOffset":"pageYOffset"]||M.a.body[i]||M.a.documentElement[i]:t[i]}(this._view,this.options.horizontal)}reset(){this._prevPos=null}_onCheck(){const t=this.getScrollPos(),e=this.getOrgScrollPos();this.setScrollPos(e);const i=this.getScrollPos();null===t||this._scrollIssue&&0===e||t===i?e&&(this._scrollIssue=!1):(this._scrollIssue=!1,this.options.check({isForward:t<i,scrollPos:i,orgScrollPos:e,horizontal:this.options.horizontal}))}getContainerOffset(){return this._containerOffset}_getOffset(){const{container:t,horizontal:e}=this.options;return t.getBoundingClientRect()[e?"left":"top"]+this.getOrgScrollPos()}resize(){this._containerOffset=this.options.isOverflowScroll?0:this._getOffset()}_onResize(){this._timer.resize&&clearTimeout(this._timer.resize),this._timer.resize=setTimeout(()=>{this.resize(),this.options.resize(),this._timer.resize=null,this.reset()},100)}detachEvent(){h(this._view,"scroll",this._onCheck),h(window,"resize",this._onResize)}destroy(){this.detachEvent(),this.reset()}}var gt=class{constructor(t,e){this.options=Object.assign({useRecycle:!0,threshold:100,append:()=>{},prepend:()=>{},recycle:()=>{}},e),this._items=t,this.clear()}setSize(t){this._status.size=t}recycle(t,e){if(!this.options.useRecycle)return;const{startCursor:i,endCursor:s,size:n}=this._status;if(-1===i||-1===s)return;const r=t+n,{threshold:o,recycle:h}=this.options,a=this._items.get(i,s).map(e=>(function(t,e,i,s){const{items:n,outlines:r}=t,o=r.start,h=r.end;if(0===o.legnth||0===h.length||!n.length||!n[0].el)return 2;const a=Math.min(...o),c=Math.max(...h);return s+e<a?1:i-e>c?-1:0})(e,o,t,r)),c=a.length;let l=e?0:a.lastIndexOf(0),u=e?a.indexOf(0)-1:a.length-1;e||-1===l||(l+=1),l<0||u<0||l>u||u-l+1>=c||(h({start:l=i+l,end:u=i+u}),e?this.setCursor("start",u+1):this.setCursor("end",l-1))}scroll(t){const e=this.getCursor("start"),i=this.getCursor("end"),s=this._items;if("number"!=typeof t||-1===e||-1===i||!s.size())return;const n=this._status.size,{threshold:r,append:o,prepend:h}=this.options,a=s.get(),c=Math.max(t,0)+n,l=Math.max(...a[e].outlines.start),u=Math.min(...a[i].outlines.end),d=a.map((e,i)=>{const{start:s,end:n}=e.outlines;if(!s.length||!n.length)return!1;const o=Math.min(...s),h=Math.max(...n);return o-r<=c&&t<=h+r}),p=d.indexOf(!0),g=d.lastIndexOf(!0);~p&&p<e?h({cache:a.slice(p,Math.min(e,g+1))}):i<g?o({cache:a.slice(Math.max(p,i+1),g+1)}):c>=u-r?o({cache:a.slice(i+1,i+2)}):t<=l+r&&h({cache:a.slice(e-1,e)})}setCursor(t,e){const i=this._status,s=this._items,n=s.size();if(!this.options.useRecycle){if(i.startCursor=0,s.getOutline(n-1,"end").length)return void(i.endCursor=n-1);if("end"!==t)return}"start"===t?i.startCursor=e:i.endCursor=Math.min(n-1,e),i.startCursor=Math.max(0,i.startCursor)}setStatus(t){this._status=Object.assign(this._status,t)}getStatus(t,e){const{startCursor:i,endCursor:s,size:n}=this._status,r=Math.max(this._items.indexOf(t),0),o=(this._items.indexOf(e)+1||this._items.size())-1,h=Math.max(i-r,~i?0:-1);return{startCursor:h,endCursor:Math.max(Math.min(s-r,o-r),h),size:n}}getEdgeOutline(t){const{startCursor:e,endCursor:i}=this._status;return-1===e||-1===i?[]:this._items.getOutline("start"===t?e:i,t)}getEdgeValue(t){const e=this.getEdgeOutline(t);return e.length?Math["start"===t?"min":"max"](...e):0}getVisibleItems(){return this._items.pluck("items",this._status.startCursor,this._status.endCursor)}getCursor(t){return this._status["start"===t?"startCursor":"endCursor"]}getVisibleData(){return this._items.get(this._status.startCursor,this._status.endCursor)}remove(t){return this._items.remove(t,this._status.startCursor,this._status.endCursor)}clear(){this._status={startCursor:-1,endCursor:-1,size:-1}}};const ft=[];class _t{static add(t,e="data-"){t.length||o(M.b,"resize",w),t.__PREFIX__=e,ft.push(t),_t.resize(t)}static remove(t,e=!1){const i=t.getAttribute(`${t.__PREFIX__}fixed`)||"width";e||(t.style["width"===i?"height":"width"]="");const s=ft.indexOf(t);~s&&(ft.splice(s,1),ft.length||h(M.b,"reisze",w))}static resize(t,e="data-"){const i="string"==typeof t.__PREFIX__?t.__PREFIX__:e,s=t.getAttribute(`${i}width`),n=t.getAttribute(`${i}height`);if("height"===t.getAttribute(`${i}fixed`)){const e=u(t)||n;t.style.width=`${s/n*e}px`}else{const e=l(t)||s;t.style.height=`${n/s*e}px`}}static resizeAll(){ft.forEach(t=>_t.resize(t))}}const mt=1,yt=2;var zt=class{static waitImageLoaded(t,{prefix:e="",length:i,type:s,complete:n,error:r,end:a}){let c=0,l=i;s!==yt&&(c=l);const u=function(){0==--l&&a&&a()},d=function(){0==--c&&n&&n()},p=function(t,e=t.__ITEM_INDEX__){r&&r({target:t,itemIndex:e})},g=function(t){const i=t.target||t.srcElement;h(i,"error",g),h(i,"load",g),s===mt&&b(i,e)?_t.remove(i,"error"===t.type):d(),"error"===t.type&&p(i),delete i.__ITEM_INDEX__,u()};t.forEach((t,i)=>{t.forEach(t=>{if(t.complete&&(!R||R&&t.naturalWidth))return t.naturalWidth||p(t,i),d(),void u();t.__ITEM_INDEX__=i,s===mt&&b(t,e)&&(_t.add(t,e),d()),o(t,"load",g),o(t,"error",g),R&&t.setAttribute("src",t.getAttribute("src"))})})}static checkImageLoaded(t){return"IMG"===t.tagName?t.complete?[]:[t]:s(t.querySelectorAll("img"))}static check(t,{prefix:e,type:i=mt,complete:s,error:n,end:r}){const o=t.map(t=>this.checkImageLoaded(t)),h=o.reduce((t,e)=>t+e.length,0);i!==yt&&0!==h||setTimeout(()=>{s&&s(),0===h&&r&&r()},0),h>0&&setTimeout(()=>{this.waitImageLoaded(o,{prefix:e,length:h,type:i,complete:s,error:n,end:r})},0)}};class St{constructor(t,e,i={}){Object.assign(this.options={attributePrefix:"data-",isEqualSize:!1,isConstantSize:!1,horizontal:!1},i),this._items=t,this._renderer=e,this._layout=null}setLayout(t){this._layout=t}setSize(t){this._layout.setSize(t)}_complete(t,e,i,s,n){const r=this._items,o=i?"end":"start",h=r.indexOf(t[0]),a=r.getData(h+(i?-1:1));let c=a?a.outlines[o]:[0];this._renderer.updateSize(e);n({groups:t.map(t=>{const e=t.outlines[i?"start":"end"];if(!(s||!c.length||c.length!==e.length||!c.every((t,i)=>t===e[i])))return c=t.outlines[i?"end":"start"],dt.renderItems(t.items),t;const n=t.items,r=this._layout[i?"append":"prepend"](n,c,!0);return Object.assign(t,r),dt.renderItems(r.items),c=r.outlines[i?"end":"start"],r}),items:e,isAppend:i})}_error(t,e,i,s,o,h){const a=s[o],c=a.el,l=this.options.attributePrefix,u=()=>{if(C(t,c))return;t.push(c);const i=e.indexOf(o);-1!==i&&e.splice(i,1)};h({target:i,element:c,items:s,item:a,itemIndex:o,replace:s=>{if(!C(t,c)){if(s)if(n(s)||"object"==typeof s){const t=i.parentNode;t.insertBefore(r(s),i),t.removeChild(i),a.content=c.outerHTML}else i.src=s,i.getAttribute(`${l}width`)&&(_t.remove(i),i.removeAttribute(`${l}width`),i.removeAttribute(`${l}height`));a.content=c.outerHTML,C(e,o)||e.push(o)}},replaceItem:i=>{C(t,c)||(c.innerHTML=i,a.content=c.outerHTML,C(e,o)||e.push(o))},remove:()=>{i!==c?C(t,c)||(i.parentNode.removeChild(i),a.content=c.outerHTML,C(e,o)||e.push(o)):u()},removeItem:u})}_end(t,e,i,s){const{attributePrefix:n}=this.options,r=t.length,o=e.length;if(!r&&!o)return void s({remove:[]});const h=e.map(t=>i[t]);o?zt.check(h.map(t=>t.el),{prefix:n,complete:()=>{this._renderer.updateSize(h),s({remove:t,layout:!0})}}):s({remove:t,layout:!0})}_insert({groups:t,items:e=ut.pluck(t,"items"),isAppend:i,isUpdate:s},{error:n=(()=>{}),complete:r=(()=>{}),end:o=(()=>{})}){if(!t.length)return;const h=i?t:t.reverse(),a=[],c=[],l=e.map(t=>t.el),u=this.options.isEqualSize&&this._renderer._size.item?yt:mt,d=this.options.attributePrefix;zt.check(l,{prefix:d,type:u,complete:()=>{this._items&&this._complete(h,e,i,s,r)},error:({target:t,itemIndex:i})=>{this._items&&this._error(c,a,t,e,i,n)},end:()=>{this._items&&this._end(c,a,e,o)}})}append({groups:t,items:e,isUpdate:i},s={}){this._insert({groups:t,items:e,isUpdate:i,isAppend:!0},s)}prepend({groups:t,items:e,isUpdate:i},s={}){this._insert({groups:t,items:e,isUpdate:i,isAppend:!1},s)}layout(t,e,i){const s=this._renderer,{isConstantSize:n}=s.options,r=e.filter(t=>{const e=t.items[0];return e.orgSize&&e.rect.top>Y/10});if(!r.length)return[];let o=r[0].outlines.start;return t&&(o=[o.length?Math.min(...o):0],!n&&i.length&&s.updateSize(i)),this._layout.layout(r,o),r}destroy(){this._items=null,this._renderer=null}}"function"!=typeof Object.create&&(Object.create=function(t,e){function i(){}if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object prototype may only be an Object: "+t);if(null===t)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");return i.prototype=t,new i});var vt=class extends L.a{constructor(t,e){super(),Object.assign(this.options={itemSelector:"*",isOverflowScroll:!1,threshold:100,isEqualSize:!1,isConstantSize:!1,useRecycle:!0,horizontal:!1,transitionDuration:0,useFit:!0,attributePrefix:"data-"},e),ot&&(this.options.useFit=!1),$&&(this.options.isOverflowScroll=!1),this._reset(),this._loadingBar={};const{isOverflowScroll:i,isEqualSize:s,isConstantSize:n,horizontal:r,threshold:o,useRecycle:h}=this.options;this._items=new ut,this._renderer=new dt(t,{isEqualSize:s,isConstantSize:n,horizontal:r,container:i}),this._watcher=new pt(this._renderer.view,{isOverflowScroll:i,horizontal:r,container:this._renderer.container,resize:()=>this._onResize(),check:t=>this._onCheck(t)}),this._infinite=new gt(this._items,{horizontal:r,useRecycle:h,threshold:o,append:t=>this._requestAppend(t),prepend:t=>this._requestPrepend(t),recycle:t=>this._recycle(t)})}append(t,e){return this._manager&&this._insert(t,N,e),this}prepend(t,e){return this._manager&&this._insert(t,B,e),this}setLayout(t,e={}){const{isEqualSize:i,isConstantSize:s,attributePrefix:n,horizontal:r}=this.options;return this._manager||(this._manager=new St(this._items,this._renderer,{attributePrefix:n,isEqualSize:i,isConstantSize:s})),"function"==typeof t?this._manager.setLayout(new t(Object.assign(e,{horizontal:r}))):(t.options.horizontal=r,this._manager.setLayout(t)),this._renderer.resize(),this._setSize(this._renderer.getViewportSize()),this}_setSize(t){this._infinite.setSize(this._renderer.getViewSize()),this._manager.setSize(t)}getItems(t=!1){return t?this._items.pluck("items"):this._infinite.getVisibleItems()}_fitItems(t,e=0){t>0&&this._watcher.scrollBy(-t),this._items.fit(t,this.options.horizontal),dt.renderItems(this.getItems()),this._setContainerSize(this._getEdgeValue("end")||e),t<0&&this._watcher.scrollBy(-t)}_fit(t=this.options.useFit){let e=this._getEdgeValue("start");const i=this._getLoadingStatus()===it&&this._status.loadingSize||0,{isConstantSize:s,isEqualSize:n,useRecycle:r}=this.options;if(!r||!t||s||n)e<i&&this._fitItems(e-i,i),e=0;else{if(0===e&&!i)return 0;this._fitItems(e-i,i)}return this._isLoading()&&this._renderLoading(),e}_getEdgeValue(t){return this._infinite.getEdgeValue(t)}layout(t=!0){if(!this._manager)return this;const e=this._renderer,i=this._items,n=this._infinite,r=e.resize(),o=this.getItems(),{isEqualSize:h,isConstantSize:a,transitionDuration:c}=this.options,l=t&&(h||a),u=i.size();if(t&&r&&this._setSize(e.getViewportSize()),!u)return this._insert(s(e.container.children),!0),this;if(!o.length)return this;const d=n.getCursor("start"),p=n.getCursor("end"),g=!l&&t&&r?i.get(d,p):i.get();return this._manager.layout(t,g,r?o:[]),l?this._fit():t&&r&&i.clearOutlines(d,p),dt.renderItems(o,c),t&&this._watcher.setScrollPos(),this._onLayoutComplete({items:o,isAppend:N,fromCache:W,isTrusted:U,useRecycle:!1,isLayout:!0}),this}remove(t,e=!0){if(t){const i=this._infinite.remove(t);return i&&dt.removeElement(t),e&&this.layout(!1),i}return null}getGroupKeys(t){return(t?this._items.get():this._infinite.getVisibleData()).map(t=>t.groupKey)}getStatus(t,e){return{_status:Object.assign({},this._status),_items:this._items.getStatus(t,e),_renderer:this._renderer.getStatus(),_watcher:this._watcher.getStatus(),_infinite:this._infinite.getStatus(t,e)}}setStatus(t,e=!0){if(!t)return this;const{_status:i,_renderer:s,_items:n,_watcher:r,_infinite:o}=t;if(!(i&&s&&n&&r&&o))return this;const h=this._items,a=this._renderer,c=this._watcher,l=this._infinite;c.detachEvent(),Object.assign(this._status,i),this._status.processingStatus=tt,h.setStatus(n),a.setStatus(s),l.setStatus(o);const u=this.getItems(),d=u.length;a.createAndInsert(u);const p=a.isNeededResize();c.setStatus(r,e),c.attachEvent();const{isConstantSize:g,isEqualSize:f}=this.options;return d?p?(a.resize(),this._setSize(a.getViewportSize()),g?this.layout(!0):(this._items.clearOutlines(),this._postLayout({fromCache:!0,groups:f?h.get():l.getVisibleData(),items:u,newItems:u,isAppend:!0,isTrusted:!1}))):this.layout(!1):this._requestAppend({cache:u.slice(0,1)}),this}clear(){return this._items.clear(),this._renderer.clear(),this._infinite.clear(),this._reset(),this._appendLoadingBar(),this}setLoadingBar(t={}){const e="object"==typeof t?t:{append:t,prepend:t};this._status.loadingSize=0,this._status.loadingStyle={};const i=this._loadingBar;for(const t in e)i[t]=r(e[t]),i[t].className+=` ${V}`;return this._appendLoadingBar(),this}_appendLoadingBar(){const t=this._loadingBar,e=this._renderer.container;for(const i in t)e.appendChild(t[i])}isProcessing(){return this._isProcessing()||this._isLoading()}_isProcessing(){return(this._status.processingStatus&st)>0}_isLoading(){return this._getLoadingStatus()>0}_getLoadingStatus(){return this._status.processingStatus&(et|it)}_process(t,e=!0){e?this._status.processingStatus|=t:this._status.processingStatus-=this._status.processingStatus&t}_insert(t,e,i){if(this._isProcessing()||0===t.length)return;const s=void 0===i?(new Date).getTime()+Math.floor(1e3*Math.random()):i,n=ut.from(t,this.options.itemSelector,{isAppend:e,groupKey:s,outlines:{start:[],end:[]}});if(!n.length)return;const r={groupKey:s,items:n,outlines:{start:[],end:[]}},o=e?"append":"prepend";if(this._items[o](r),!e){const t=this._infinite,e=t.getCursor("start"),i=t.getCursor("end");t.setCursor("start",e+1),t.setCursor("end",i+1)}this._postLayout({fromCache:K,groups:[r],items:n,newItems:n,isAppend:e,isTrusted:U})}_recycle({start:t,end:e}){this.options.useRecycle&&dt.removeItems(this._items.pluck("items",t,e))}getLoadingBar(t=this._getLoadingStatus()!==it){return this._loadingBar[t?"append":"prepend"]}startLoading(t,e={display:"block"}){if(this._isLoading())return this;const i=t?"append":"prepend";return this._process(t?et:it),this._loadingBar[i]?(this._renderLoading(e),this._status.loadingStyle=e,t?this._setContainerSize(this._getEdgeValue("end")+this._status.loadingSize):this._fit(),this):this}_renderLoading(t=this._status.loadingStyle){if(!this._isLoading())return;const e=this._getLoadingStatus()===et,i=this._loadingBar[e?"append":"prepend"];if(!i)return;const s=Object.assign({position:"absolute"},t);for(const t in s)i.style[t]=s[t];this._status.loadingSize=this.options.horizontal?d(i):p(i);const n=this.options.horizontal?"left":"top";if(!(n in s)){const t=e?this._getEdgeValue("end"):this._getEdgeValue("start")-this._status.loadingSize;i.style[n]=`${t}px`}}endLoading(t={display:"none"}){if(!this._isLoading())return this;const e=this._getLoadingStatus()===et,i=e?"append":"prepend",s=this._loadingBar[i],n=this._status,r=n.loadingSize;if(this._process(et|it,!1),n.loadingSize=0,n.loadingStyle={},s){const i=Object.assign({[this.options.horizontal?"left":"top"]:`${-r}px`},t);for(const t in i)s.style[t]=i[t];e?this._setContainerSize(this._getEdgeValue("end")):this._fitItems(r)}return this.options.useRecycle&&!this.isProcessing()&&this._infinite.recycle(this._watcher.getScrollPos(),e),this}_setContainerSize(t){this._renderer.setContainerSize(Math.max(this._items.getMaxEdgeValue(),t))}moveTo(t,e=0){if(this.isProcessing())return this;const i=this._items.getData(t);if(!i)return this;const s=this._infinite,n=i.outlines,r=i.items,o=r[e],h=n.start&&0===n.start.length,a=s.getCursor("start"),c=s.getCursor("end"),l=a<=t&&t<=c,{useRecycle:u,horizontal:d}=this.options;if(l||!u||!h){let s=o?o.rect[d?"left":"top"]:Math.max(...n.start);const h=Math.min(...n.start);h<0&&(this._fitItems(h,0),s-=h);const c=t>a;return l||c?(this._scrollTo(s),this):(this._postLayout({fromCache:!0,groups:[i],items:r,newItems:[],isAppend:c,isTrusted:!1,moveCache:!0,moveItem:e}),this)}{const s=t>c||t<a-1;this._postCache({isAppend:s,cache:[i],isTrusted:!1,moveItem:e})}return this}_setScrollPos(t){this._watcher.setScrollPos(this._watcher.getContainerOffset()+t)}_scrollTo(t){this._watcher.scrollTo(this._watcher.getContainerOffset()+t)}_onImageError(t){this.trigger("imageError",Object.assign(t,{element:t.item.el}))}_postCache({cache:t,isAppend:e,isTrusted:i=!0,moveItem:s=-1}){const{isConstantSize:n}=this.options,r=ut.pluck(t,"items");let o=!0;const h=r.filter(t=>t.orgSize?!n&&t.rect.top<Y/10:(o=!1,!0));this._postLayout({fromCache:o,groups:t,items:r,newItems:h,isAppend:e,isTrusted:i,moveItem:s})}_postLayout({fromCache:t,groups:e,items:i=ut.pluck(e,"items"),newItems:s,isAppend:n,isTrusted:r,moveCache:o,moveItem:h=-2}){this._process(st);const a=n?"append":"prepend",c=this._items,l=this.options.horizontal;return dt.createElements(i),this._renderer[a](i),this._manager[a]({groups:e,items:s,isAppend:n},{complete:()=>{const s=this._infinite,a=Math.max(s.getCursor("start"),0),u=Math.max(s.getCursor("end"),0);let d=c.indexOf(e[0].groupKey),p=c.indexOf(e[e.length-1].groupKey),g=!0;if((d>u+1||p<a-1)&&(g=!1),g&&(n?(d=a,p=Math.max(u,p)):(d=Math.max(Math.min(a,d),0),p=u)),!g&&this._recycle({start:a,end:u}),s.setCursor("start",d),s.setCursor("end",p),h>-1){const t=i[h].rect[l?"left":"top"];g||o||c.clearOutlines(d,p),this._scrollTo(t),this._setScrollPos(t)}this._onLayoutComplete({groups:e,items:i,isAppend:n,fromCache:t,isTrusted:r,useRecycle:!1})},error:t=>this._onImageError(t),end:({remove:t,layout:e})=>{if(t.forEach(t=>this.remove(t,!1)),e)this.layout(!1);else if(!this.isProcessing()&&this.options.useRecycle){const t=this._watcher.getScrollPos();this._infinite.recycle(t,n)}}}),this}_requestAppend({cache:t}){this._isProcessing()||(t&&t.length?this._postCache({cache:t,isAppend:N}):this.trigger("append",{isTrusted:X,groupKey:this.getGroupKeys().pop(),startLoading:t=>{this.startLoading(!0,t)},endLoading:t=>{this.endLoading(t)}}))}_requestPrepend({cache:t}){this._fit(this.options.useFit||!t.length),this._isProcessing()||(t&&t.length?this._postCache({cache:t,isAppend:B}):this.trigger("prepend",{isTrusted:X,groupKey:this.getGroupKeys().shift(),startLoading:t=>{this.startLoading(!1,t)},endLoading:t=>{this.endLoading(t)}}))}_onResize(){this.layout(!0)}_onCheck({isForward:t,scrollPos:e,horizontal:i,orgScrollPos:s}){this.trigger("change",{isForward:t,horizontal:i,scrollPos:e,orgScrollPos:s}),this._infinite.scroll(e)}_onLayoutComplete({items:t,isAppend:e,isTrusted:i=!1,useRecycle:s=this.options.useRecycle,fromCache:n=!1,isLayout:r=!1}){const o=this._renderer.getViewSize();e?this._isLoading()&&this._renderLoading():this._fit();const h=this._watcher,a=h.getScrollPos();r||!s||this._isLoading()||this._infinite.recycle(a,e);const c=this._getEdgeValue("end");e&&this._setContainerSize(c+this._status.loadingSize||0),!r&&this._process(st,!1),this.trigger("layoutComplete",{target:t.concat(),isAppend:e,isTrusted:i,fromCache:n,isLayout:r,isScroll:o<h.getContainerOffset()+c,scrollPos:a,orgScrollPos:h.getOrgScrollPos(),size:c,endLoading:t=>{this.endLoading(t)}}),this._infinite.scroll(a,e)}_reset(){this._status={processingStatus:tt,loadingSize:0}}destroy(){this._infinite.clear(),this._watcher.destroy(),this._manager.destroy(),this._reset(),this._items.clear(),this._renderer.destroy()}};const{START:wt,CENTER:bt,END:Ct,JUSTIFY:xt}={START:"start",CENTER:"center",END:"end",JUSTIFY:"justify"};var Et=class{constructor(t={}){this.options=_({margin:0,horizontal:!1,align:wt,itemSize:0},t),this._size=0,this._columnSize=0,this._columnLength=0,this._style=f(this.options.horizontal)}checkColumn(t){const{itemSize:e,margin:i,horizontal:s}=this.options,n=s?"height":"width",r=parseInt(e||t&&t.size[n],10)||0;this._columnSize=r,this._columnLength=r?Math.max(parseInt((this._size+i)/(r+i),10),1):1}_layout(t,e,i){const s=t.length,n=this.options.margin,r=this.options.align,o=this._style,h=o.size1,a=o.size2,c=o.pos1,l=o.pos2,u=this._columnSize,d=this._columnLength,p=this._size,g=p-(u+n)*d+n,f=i?"min":"max",_=e.slice(),m=e.slice();for(let e=0;e<s;++e){const o=Math[f](...m)||0;let _=m.indexOf(o);const y=t[i?e:s-1-e],z=y.size[h],S=y.size[a],v=i?o:o-n-z,w=v+z+n;-1===_&&(_=0);let b=(u+n)*_;r===bt?b+=g/2:r===Ct?b+=g+u-S:r===xt&&(d<=1?b+=g/2:b=(p-u)/(d-1)*_),y.rect={[c]:v,[l]:b},y.column=_,m[_]=i?w:v}return i||t.sort((t,e)=>{const i=t.rect[c],s=t.rect[l],n=e.rect[c],r=e.rect[l];return i-n?i-n:s-r}),{start:i?_:m,end:i?m:_}}_insert(t=[],e=[],i,s){const n=s?t:m(t);let r=e;return this._columnLength||this.checkColumn(t[0]),e.length!==this._columnLength&&(r=y(new Array(this._columnLength),0===e.length?0:Math[i===N?"min":"max"](...e)||0)),{items:n,outlines:this._layout(n,r,i)}}append(t,e,i){return this._insert(t,e,N,i)}prepend(t,e,i){return this._insert(t,e,B,i)}layout(t=[],e=[]){const i=t.length&&t[0].items.length&&t[0].items[0]||0;this.checkColumn(i);let s;if(e.length!==this._columnLength){const t=0===e.length?0:Math.min(...e);s=y(new Array(this._columnLength),t)}else s=e.slice();return t.forEach(t=>{const e=t.items,i=this._layout(e,s,N);t.outlines=i,s=i.end}),this}setSize(t){return this._size=t,this}};var Ot=class{constructor(t={}){this.options=_({margin:0,horizontal:!1,itemSize:0,frame:[],frameFill:!0},t);const e=this.options.frame.map(t=>t.slice());this._itemSize=this.options.itemSize||0,this._shapes=function(t){const e=t.length,i=e?t[0].length:0,s=[];for(let n=0;n<e;++n)for(let r=0;r<i;++r){const o=t[n][r];o&&s.push(x(t,o,n,r,i,e))}return s.sort((t,e)=>t.type<e.type?-1:1),{shapes:s,width:i,height:e}}(e),this._size=0,this._style=f(this.options.horizontal)}_getItemSize(){return this._checkItemSize(),this._itemSize}_checkItemSize(){if(this.options.itemSize)return void(this._itemSize=this.options.itemSize);const t=this._style.size2,e=this.options.margin;this._itemSize=(this._size+e)/this._shapes[t]-e}_layout(t,e=[],i){const s=t.length,n=this._style,{margin:r,frameFill:o}=this.options,h=n.size1,a=n.size2,c=n.pos1,l=n.pos2,u=this._getItemSize(),d="object"==typeof u,p=d?u[a]:u,g=d?u[h]:u,f=this._shapes[a],_=this._shapes.shapes,m=_.length,z=y(new Array(f),Y),S=y(new Array(f),Y);let v=0,w=0;if(!m)return{start:e,end:e};for(let e=0;e<s;e+=m){for(let i=0;i<m&&e+i<s;++i){const s=t[e+i],n=_[i],o=n[c],u=n[l],d=n[h],m=n[a],y=w-v+o*(g+r),b=u*(p+r),C=d*(g+r)-r,x=m*(p+r)-r;for(let t=u;t<u+m&&t<f;++t)z[t]===Y&&(z[t]=y),z[t]=Math.min(z[t],y),S[t]=Math.max(S[t],y+C+r);s.rect={[c]:y,[l]:b,[h]:C,[a]:x}}if(w=Math.max(...S),0===e)if(o){v=w;for(let t=0;t<f;++t)z[t]!==Y&&(v=Math.min(z[t]+w-S[t],v))}else v=0}for(let t=0;t<f;++t)z[t]===Y&&(z[t]=Math.max(...z),S[t]=z[t]);const b=i?z:S,C=0===e.length?0:Math[i?"max":"min"](...e);let x=i?0:w;if(o&&e.length===f){x=-Y;for(let t=0;t<f;++t)z[t]!==S[t]&&(x=Math.min(b[t]+C-e[t],x))}for(let t=0;t<f;++t)z[t]+=C-x,S[t]+=C-x;return t.forEach(t=>{t.rect[c]+=C-x}),{start:z.map(t=>parseInt(t,10)),end:S.map(t=>parseInt(t,10))}}_insert(t=[],e=[],i,s){const n=s?t:m(t);return{items:n,outlines:this._layout(n,e,i)}}layout(t=[],e=[]){const i=t.length;let s=e;for(let e=0;e<i;++e){const i=t[e];s=this._layout(i.items,s,N),i.outlines=s,s=s.end}return this}setSize(t){return this._size=t,this}append(t,e,i){return this._insert(t,e,N,i)}prepend(t,e,i){return this._insert(t,e,B,i)}};var It=class extends Ot{_checkItemSize(){const t=this.options.column;if(!t)return void super._checkItemSize();const e=this.options.margin;this._itemSize=(this._size+e)/t-e}_layout(t,e=[],i){const s=this._getItemSize(),n=this.options.margin,r=this.options.column||parseInt((this._size+n)/(s+n),10)||1,o=t.length,h=function(t,e,i,s){const n=Math[s?"min":"max"](...t)||0;return t.length!==i?y(new Array(i),0):t.map(t=>parseInt((t-n)/e,10))}(e,s,r,i),a=i?"min":"max",c=[],l=i?1:-1,u=this._style,d=u.pos1,p=u.pos2;for(let e=0;e<o;++e){const s=Math[a](...h);let n=h[i?"indexOf":"lastIndexOf"](s);const o=t[e],u=o.columnWidth,g=u&&u[0]===r&&u[1]||E(o);let f=1;if(g>1){for(let t=1;t<g&&(i&&n+t<r||!i&&n-t>=0)&&(i&&h[n+l*t]<=s||!i&&h[n+l*t]>=s);++t)++f;i||(n-=f-1)}o.columnWidth=[r,f],c.push({width:f,height:f,[d]:s-(i?0:f),[p]:n,index:e});for(let t=0;t<f;++t)h[n+t]=s+l*f}this._shapes={shapes:c,[u.size2]:r};const g=super._layout(t,e,i);return i||(c.sort((t,e)=>{const i=t[d],s=t[p],n=e[d],r=e[p];return i-n?i-n:s-r}),t.sort((t,e)=>{const i=t.rect[d],s=t.rect[p],n=e.rect[d],r=e.rect[p];return i-n?i-n:s-r})),g}};class Lt{constructor(t){Object.assign(this,{originWidth:0,originHeight:0,width:0,height:0,left:0,top:0,items:[]},t)}scaleTo(t,e){const i=this.width?t/this.width:0,s=this.height?e/this.height:0;this.items.forEach(t=>{0!==i&&(t.left*=i,t.width*=i),0!==s&&(t.top*=s,t.height*=s)}),this.width=t,this.height=e}push(t){this.items.push(t)}getOriginSize(){return this.originWidth*this.originHeight}getSize(){return this.width*this.height}getOriginRatio(){return 0===this.originHeight?0:this.originWidth/this.originHeight}getRatio(){return 0===this.height?0:this.width/this.height}}var Mt=class{constructor(t={}){this.options=_({margin:0,horizontal:!1,aspectRatio:1,sizeWeight:1,ratioWeight:1},t),this._size=0,this._style=f(this.options.horizontal)}_findBestFitArea(t,e){if(0===t.getRatio())return t.originWidth=e.width,t.originHeight=e.height,t.width=e.width,void(t.height=e.height);let i=null,s=1e7,n=!1;const r={width:0,height:0},o={width:0,height:0},{sizeWeight:h,ratioWeight:a}=this.options;t.items.forEach(t=>{const c=O(t.getOriginSize(),t.getSize())*h,l=O(t.getOriginRatio(),t.getRatio())*a,u=t.width,d=t.height;let p;for(let g=0;g<2;++g){let f,_,m,y;0===g?(f=u,m=u,y=d-(_=d*(e.height/(t.originHeight+e.height)))):(_=d,y=d,m=u-(f=u*(e.width/(t.originWidth+e.width))));const z=f*_,S=f/_,v=m*y,w=y/y;p=O(e.getSize(),z)*h,p+=O(e.getRatio(),S)*a,p+=O(t.getOriginSize(),v)*h-c,(p+=O(t.getOriginRatio(),w)*a-l)===Math.min(p,s)&&(s=p,i=t,n=0===g,r.width=f,r.height=_,o.width=m,o.height=y)}}),function(t,e,i,s,n){t.height=i.height,t.width=i.width,e.height=s.height,e.width=s.width,n?(t.top=e.top+e.height,t.left=e.left):(t.left=e.left+e.width,t.top=e.top)}(e,i,r,o,n)}_layout(t,e=[],i){const s=this._style,{horizontal:n,aspectRatio:r,margin:o}=this.options,h=s.pos1,a=this._size*(n?r:1),c=this._size/(n?1:r),l=n?a:c,u=function(t){return t&&t.length?t:[0]}(e),d=i?Math.max(...u):Math.min(...u)-l-o,p=d+l+o,g=new Lt({});return t.forEach(t=>{const{width:e,height:i}=t.orgSize,s=new Lt({width:e,height:i,originWidth:e,originHeight:i});this._findBestFitArea(g,s),g.push(s),g.scaleTo(a+o,c+o)}),t.forEach((t,e)=>{const i=g.items[e],s=i.width,n=i.height,r=i.top,a=i.left;t.rect={top:r,left:a,width:s-o,height:n-o},t.rect[h]+=d}),{start:[d],end:[p]}}_insert(t=[],e=[],i,s){const n=s?t:m(t);return{items:n,outlines:this._layout(n,e,i)}}append(t,e,i){return this._insert(t,e,N,i)}prepend(t,e,i){return this._insert(t,e,B,i)}layout(t=[],e=[]){const i=t.length;let s=e;for(let e=0;e<i;++e){const i=t[e];s=this._layout(i.items,s,N),i.outlines=s,s=s.end}return this}setSize(t){return this._size=t,this}},Pt={single_source_shortest_paths:function(t,e,i){var s={},n={};n[e]=0;var r=new class{constructor(t){this.content=[],this.scoreFunction=t}push(t){this.content.push(t),this.bubbleUp(this.content.length-1)}pop(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t}size(){return this.content.length}bubbleUp(t){for(var e=this.content[t];t>0;){var i=Math.floor((t+1)/2)-1,s=this.content[i];if(!(this.scoreFunction(e)<this.scoreFunction(s)))break;this.content[i]=e,this.content[t]=s,t=i}}sinkDown(t){for(var e=this.content.length,i=this.content[t],s=this.scoreFunction(i);;){var n=2*(t+1),r=n-1,o=null;if(r<e){var h=this.content[r],a=this.scoreFunction(h);a<s&&(o=r)}if(n<e){var c=this.content[n],l=this.scoreFunction(c);l<(null==o?s:a)&&(o=n)}if(null===o)break;this.content[t]=this.content[o],this.content[o]=i,t=o}}}(function(t){return t.cost});r.push({value:e,cost:0});for(var o,h,a,c,l,u;r.size();){h=(o=r.pop()).value,a=o.cost,c=t(h)||{};for(var d in c)l=a+c[d],u=n[d],("undefined"==typeof n[d]||u>l)&&(n[d]=l,r.push({value:d,cost:l}),s[d]=h)}if("undefined"==typeof n[i]){var p=["Could not find a path from ",e," to ",i,"."].join("");throw new Error(p)}return s},extract_shortest_path_from_predecessor_list:function(t,e){for(var i=[],s=e;s;)i.push(s),t[s],s=t[s];return i.reverse(),i},find_path:function(t,e,i){var s=Pt.single_source_shortest_paths(t,e,i);return Pt.extract_shortest_path_from_predecessor_list(s,i)}};var Tt=Pt;var At=class{constructor(t={}){this.options=_({margin:0,horizontal:!1,minSize:0,maxSize:0,column:[1,8]},t),this._style=f(this.options.horizontal),this._size=0}_layout(t,e,i){const s=this._style,n=s.size1,r=s.size2,o=t.length;let h=this.options.column;"object"!=typeof h&&(h=[h,h]);const a=Tt.find_path(e=>{const i={},s=+e.replace(/[^0-9]/g,""),a=o+1;for(let e=Math.min(s+h[0],a-1);e<a&&!(e-s>h[1]);++e){let o=this._getCost(t,s,e,n,r);null!==o&&(o<0&&e===a-1&&(o=0),i[`${e}`]=Math.pow(o,2))}return i},"0",`${o}`);return this._setStyle(t,a,e,i)}_getSize(t,e,i){const s=this.options.margin,n=t.reduce((t,s)=>t+s.orgSize[i]/s.orgSize[e],0);return(this._size-s*(t.length-1))/n}_getCost(t,e,i,s,n){const r=this._getSize(t.slice(e,i),s,n),o=this.options.minSize||0,h=this.options.maxSize||Infinity;return isFinite(h)?r<o?Math.pow(r-o,2)+Math.pow(h,2):r>h?Math.pow(r-h,2)+Math.pow(h,2):Math.min(r-h,o-r):r<o?Math.max(Math.pow(o,2),Math.pow(r,2)):r-o}_setStyle(t,e,i=[],s){const n=this._style,r=n.pos1,o=n.size1,h=n.pos2,a=n.size2,c=e.length,l=this.options.margin,u=i[0]||0;let d=u,p=0;for(let i=0;i<c-1;++i){const s=parseInt(e[i],10),n=parseInt(e[i+1],10),c=t.slice(s,n),g=c.length,f=this._getSize(c,o,a),_=d;for(let t=0;t<g;++t){const e=c[t],i=e.orgSize[a]/e.orgSize[o]*f,s=0===t?0:c[t-1].rect,n=s?s[h]+s[a]+l:0;e.rect={[r]:_,[h]:n,[o]:f,[a]:i}}d=u+(p+=l+f)}const g=t.length;if(s)return{start:[u],end:[d]};for(let e=0;e<g;++e)t[e].rect[r]-=p;return{start:[u-p],end:[u]}}_insert(t=[],e=[],i,s){const n=s?t:m(t);return{items:n,outlines:this._layout(n,e,i)}}setSize(t){return this._size=t,this}append(t,e,i){return this._insert(t,e,N,i)}prepend(t,e,i){return this._insert(t,e,B,i)}layout(t=[],e=[]){const i=t.length;let s=e;for(let e=0;e<i;++e){const i=t[e];s=this._layout(i.items,s,N),i.outlines=s,s=s.end}return this}},jt=i(6),Rt=i.n(jt);i.d(e,"VERSION",function(){return Rt.a}),i.d(e,"GridLayout",function(){return Et}),i.d(e,"FrameLayout",function(){return Ot}),i.d(e,"SquareLayout",function(){return It}),i.d(e,"PackingLayout",function(){return Mt}),i.d(e,"JustifiedLayout",function(){return At}),i.d(e,"Infinite",function(){return gt}),i.d(e,"ImageLoaded",function(){return zt}),i.d(e,"AutoSizer",function(){return _t}),i.d(e,"DOMRenderer",function(){return dt}),i.d(e,"Watcher",function(){return pt}),i.d(e,"ItemManager",function(){return ut}),i.d(e,"LayoutManager",function(){return St}),i.d(e,"default",function(){return vt})},function(t,e,i){!function(e,i){t.exports=i()}(0,function(){return function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,i){"use strict";e.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._eventHandler={},this.options={}}return t.prototype.trigger=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=this._eventHandler[t]||[];if(!(i.length>0))return!0;i=i.concat(),e.eventType=t;var s=!1,n=[e],r=0;e.stop=function(){s=!0},e.currentTarget=this;for(var o=arguments.length,h=Array(o>2?o-2:0),a=2;a<o;a++)h[a-2]=arguments[a];for(h.length>=1&&(n=n.concat(h)),r=0;i[r];r++)i[r].apply(this,n);return!s},t.prototype.once=function(t,e){if("object"===(void 0===t?"undefined":s(t))&&void 0===e){var i=t,n=void 0;for(n in i)this.once(n,i[n]);return this}if("string"==typeof t&&"function"==typeof e){var r=this;this.on(t,function i(){for(var s=arguments.length,n=Array(s),o=0;o<s;o++)n[o]=arguments[o];e.apply(r,n),r.off(t,i)})}return this},t.prototype.hasOn=function(t){return!!this._eventHandler[t]},t.prototype.on=function(t,e){if("object"===(void 0===t?"undefined":s(t))&&void 0===e){var i=t,n=void 0;for(n in i)this.on(n,i[n]);return this}if("string"==typeof t&&"function"==typeof e){var r=this._eventHandler[t];void 0===r&&(this._eventHandler[t]=[],r=this._eventHandler[t]),r.push(e)}return this},t.prototype.off=function(t,e){if(void 0===t)return this._eventHandler={},this;if(void 0===e){if("string"==typeof t)return this._eventHandler[t]=undefined,this;var i=t,s=void 0;for(s in i)this.off(s,i[s]);return this}var n=this._eventHandler[t];if(n){var r=void 0,o=void 0;for(r=0;(o=n[r])!==undefined;r++)if(o===e){n=n.splice(r,1);break}}return this},t}();e["default"]=n,t.exports=e["default"]},,function(t,e,i){"use strict";e.__esModule=!0;var s=function(t){return t&&t.__esModule?t:{"default":t}}(i(0));s["default"].VERSION="2.1.1",e["default"]=s["default"],t.exports=e["default"]}])})},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(s){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){t.exports="3.4.0-snapshot"}])});
//# sourceMappingURL=infinitegrid.pkgd.min.js.map